<CreateTaskScreen>:
    BaseScreenLayout:
        BoxLayout:
            orientation: 'vertical'

            CustomHeader:
                header_text: "Vytvořit nový úkol"

            ScrollView:
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: 10
                    spacing: 10

                    Spinner:
                        id: company_spinner
                        text: "Vyber firmu"
                        values: [company["name"] for company in root.companies] if root.companies else []
                        size_hint_y: None
                        height: 40
                        on_text: root.on_company_select(self.text)

                    GridLayout:
                        cols: 2
                        size_hint_y: None
                        height: 40

                        Label:
                            id: start_label
                            text: "Začátek: Nevybráno"
                            color: 0, 0, 0, 1

                        Label:
                            id: end_label
                            text: "Konec: Nevybráno"
                            color: 0, 0, 0, 1

                    GridLayout:
                        cols: 2
                        size_hint_y: None
                        height: 40
                        spacing: 10
                        padding: 0

                        Button:
                            text: "Vybrat začátek"
                            on_press: root.open_start_date_picker()

                        Button:
                            text: "Vybrat konec"
                            on_press: root.open_end_date_picker()

                    GridLayout:
                        id: names_grid
                        cols: 1
                        size_hint_y: None
                        color: 0, 0, 0, 1
                        height: self.minimum_height
                        row_default_height: 40
                        row_force_default: True
                        spacing: 5

                    TextInput:
                        id: title_input
                        hint_text: "Název úkolu"
                        size_hint_y: None
                        height: 40

                    TextInput:
                        id: description_input
                        hint_text: "Popis úkolu"
                        size_hint_y: None
                        height: 80

                    Button:
                        text: "Vybrat obrázek"
                        size_hint_y: None
                        height: 40
                        on_press: root.open_filechooser()

                    Button:
                        text: "Uložit úkol"
                        size_hint_y: None
                        height: 40
                        on_press: root.save_task()
